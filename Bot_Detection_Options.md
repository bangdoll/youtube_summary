# YouTube Bot 偵測繞過：可行選項表

> **問題**：Render 的 IP 被 YouTube 標記為自動化請求來源，導致音訊下載失敗。

---

## 方案比較

| 方案 | 複雜度 | 成本 | 穩定性 | 狀態 |
|------|--------|------|--------|------|
| **1. PO Token + Visitor Data** | 低 | 免費 | ⚠️ 不穩定 | ❌ 失敗 |
| **2. Cookie 認證** | 中 | 免費 | ⚠️ 時效性 | ❌ 失敗 |
| **3. Playwright 無頭瀏覽器** | 高 | 免費 | ⚠️ 不穩定 | ❌ 失敗 |
| **4. 住宅代理 (Residential Proxy)** | 中 | 💰 $5-50/月 | ✅ 高 | ⏳ 未測試 |
| **5. 本機運行 (Local)** | 低 | 免費 | ✅ 高 | ✅ 可行備案 |
| **6. 換雲端平台** | 中 | 依平台 | ⚠️ 不確定 | 🤔 未嘗試 |
| **7. 自架 VPS (乾淨 IP)** | 高 | $5-20/月 | ✅ 高 | 🤔 未嘗試 |
| **8. Gemini 直接分析** | 低 | 免費 | ✅ 高 | ✅ 成功！ |

---

## 方案詳情

### 1. PO Token + Visitor Data
- **原理**：模擬瀏覽器的 Bot Guard 驗證 Token
- **失敗原因**：Token 綁定 IP，伺服器 IP 與生成 IP 不同

### 2. Cookie 認證  
- **原理**：傳入已登入 YouTube 的瀏覽器 Cookie
- **失敗原因**：Cookie 可能過期或 IP 綁定

### 3. Playwright 無頭瀏覽器
- **原理**：啟動真實瀏覽器來播放影片並攔截音訊 URL
- **失敗原因**：YouTube 仍偵測到資料中心 IP

### 4. 住宅代理 (推薦)
- **原理**：透過真實住宅 IP 發送請求
- **供應商**：Bright Data, Oxylabs, Smartproxy
- **環境變數**：`PROXY_URL=http://user:pass@host:port`

### 5. 本機運行
- **原理**：在自己電腦上運行，使用個人網路 IP
- **適用場景**：備案方案，處理無逐字稿的影片

---

## 推薦策略

**混合模式**：
1. 有逐字稿的影片 → Render 處理 (免費)
2. 無逐字稿的影片 → 本機處理 或 代理

---

*最後更新：2026-01-06*
